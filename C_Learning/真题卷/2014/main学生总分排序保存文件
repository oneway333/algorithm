/*
 *
  n个学生三门成绩，总分，根据总分降序排序，打印并保存student.dat，总分相同名次相同
 */

#include <stdio.h>
#include <stdlib.h>

#define N 50

typedef struct{
    int num, grades[3], total, rank;
    char name[N];
}Student;

void input(Student stu[], int n){
    for (int i = 0; i < n; i++){
        stu[i].num = i + 1;
        scanf("%s", stu[i].name);
        for (int j = 0; j < 3; j++)
            scanf("%d", &stu[i].grades[j]);
    }
    for (int i = 0; i < n; i++){
        int s = 0;
        for (int j = 0; j < 3; j++)
            s += stu[i].grades[j];
        stu[i].total = s;
    }
}

void sort(Student stu[], int n){
    for (int i = 0; i < n - 1; i++){
        int k = i;
        for (int j = i + 1; j < n; j++)
            if (stu[j].total > stu[k].total) k = j;
        if (k != i){
            Student t = stu[k];
            stu[k] = stu[i];
            stu[i] = t;
        }
    }
}

void saveAndPrint(Student stu[], int n){
    FILE *fp;
    if ((fp = fopen("student.dat", "wb")) == NULL){
        printf("open file failed");
        exit(0);
    }
    fwrite(stu, sizeof(Student), n, fp);
    fclose(fp);
    for (int i = 0; i < n; i++){
        printf("num:%5d, name:%5s, ", stu[i].num, stu[i].name);
        printf("Math:%5d, Language:%5d, English:%5d, ", stu[i].grades[0], stu[i].grades[1], stu[i].grades[2]);
        printf("total:%5d, rank:%5d", stu[i].total, stu[i].rank);
        putchar('\n');
    }
}

void ranking(Student stu[], int n){
    stu[0].rank = 1;
    for (int i = 1; i < n; i++){
        if (stu[i].total == stu[i - 1].total) stu[i].rank = stu[i - 1].rank;
        else stu[i].rank = i + 1;
    }
}

int main(){
    int n;
    scanf("%d", &n);
    Student stu[N];
    input(stu, n);
    sort(stu, n);
    ranking(stu, n);
    saveAndPrint(stu, n);
    return 0;

}